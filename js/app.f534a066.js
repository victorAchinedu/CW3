(function(){"use strict";var e={9396:function(e,t,r){var o=r(3751),a=r(641),s=r(33);const n=e=>((0,a.Qi)("data-v-0e30d93f"),e=e(),(0,a.jt)(),e),l={id:"app"},i=n((()=>(0,a.Lk)("h1",null,"After School Classes",-1)));function c(e,t,r,o,n,c){const d=(0,a.g2)("LessonComponent"),u=(0,a.g2)("CheckoutForm");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("header",null,[i,(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showCheckout=!n.showCheckout)},(0,s.v_)(n.showCheckout?"Back to Lessons":"View Cart")+" ("+(0,s.v_)(n.cart.length)+") ",1)]),n.showCheckout?((0,a.uX)(),(0,a.Wv)(u,{key:1,cart:n.cart,onRemoveFromCart:c.removeFromCart,onSubmitOrder:c.submitOrder},null,8,["cart","onRemoveFromCart","onSubmitOrder"])):((0,a.uX)(),(0,a.Wv)(d,{key:0,canAddToCart:c.canAddToCart,cartCount:c.cartCount,onAddToCart:c.addToCart},null,8,["canAddToCart","cartCount","onAddToCart"]))])}r(4114);const d=e=>((0,a.Qi)("data-v-160e4b3a"),e=e(),(0,a.jt)(),e),u={class:"d-flex align-items-end gap-3 flex-wrap mb-3"},h=d((()=>(0,a.Lk)("label",{for:"search",class:"form-label"},"Search",-1))),p=d((()=>(0,a.Lk)("label",{for:"sortAttribute",class:"form-label"},"Sort By:",-1))),v=(0,a.Fv)('<option value="title" data-v-160e4b3a>Title</option><option value="subject" data-v-160e4b3a>Subject</option><option value="location" data-v-160e4b3a>Location</option><option value="price" data-v-160e4b3a>Price</option><option value="spaces" data-v-160e4b3a>Spaces</option>',5),m=[v],k=d((()=>(0,a.Lk)("label",{for:"sortOrder",class:"form-label"},"Sort Order:",-1))),b=d((()=>(0,a.Lk)("option",{value:"asc"},"Ascending",-1))),L=d((()=>(0,a.Lk)("option",{value:"desc"},"Descending",-1))),f=[b,L],C={id:"main-wrapper"},y={class:"product-container"},g={class:"lesson-details"},O=["onClick","disabled"],_={key:0},w={key:1},A={key:2};function T(e,t,r,n,l,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",u,[(0,a.Lk)("div",null,[h,(0,a.bo)((0,a.Lk)("input",{id:"search",type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchTerm=e),placeholder:"search for a lesson...",onInput:t[1]||(t[1]=(...e)=>i.searchLessons&&i.searchLessons(...e))},null,544),[[o.Jo,l.searchTerm]])]),(0,a.Lk)("div",null,[p,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.sortAttribute=e),class:"form-select",onChange:t[3]||(t[3]=(...e)=>i.searchLessons&&i.searchLessons(...e))},m,544),[[o.u1,l.sortAttribute]])]),(0,a.Lk)("div",null,[k,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.sortOrder=e),class:"form-select",onChange:t[5]||(t[5]=(...e)=>i.searchLessons&&i.searchLessons(...e))},f,544),[[o.u1,l.sortOrder]])])]),(0,a.Lk)("main",C,[(0,a.Lk)("div",y,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.lessons,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"product",key:t},[(0,a.Lk)("i",{class:(0,s.C4)(e.icon)},null,2),(0,a.Lk)("div",g,[(0,a.Lk)("h2",null,(0,s.v_)(e.title),1),(0,a.Lk)("p",null,"Location: "+(0,s.v_)(e.Location),1),(0,a.Lk)("p",null,"Price: "+(0,s.v_)(e.price),1),(0,a.Lk)("p",null,"Slots Available: "+(0,s.v_)(e.spaces),1),(0,a.Lk)("button",{class:"success-button",onClick:t=>i.addLessonToCart(e),disabled:0===e.availableInventory},"Add to Cart",8,O),0===e.availableInventory?((0,a.uX)(),(0,a.CE)("span",_,"All out!")):e.availableInventory<5?((0,a.uX)(),(0,a.CE)("span",w,"Only "+(0,s.v_)(e.availableInventory-r.cartCount(e._id))+" left!",1)):((0,a.uX)(),(0,a.CE)("span",A,"Buy Now!"))])])))),128))])])])}var F={name:"LessonComponent",props:["canAddToCart","cartCount","add-to-cart"],data(){return{lessons:[],searchTerm:"",sortAttribute:"subject",sortOrder:"asc",baseURL:"https://cw2-backend-lyart.vercel.app/"}},created(){this.fetchLessons()},methods:{async fetchLessons(){try{const e=await fetch(`${this.baseURL}collection/lessons`);this.lessons=await e.json()}catch(e){console.error("Error fetching lessons:",e)}},async searchLessons(){var e=`?search=${this.searchTerm}&sort=${this.sortAttribute}&order=${this.sortOrder}`,t=await fetch(`${this.baseURL}search/collection/lessons/${e}`);this.lessons=await t.json()},addLessonToCart(e){this.$emit("add-to-cart",e)}}},N=r(6262);const S=(0,N.A)(F,[["render",T],["__scopeId","data-v-160e4b3a"]]);var j=S;const E=e=>((0,a.Qi)("data-v-dd869c3a"),e=e(),(0,a.jt)(),e),X={class:"checkout-form"},U={class:"checkout"},I=E((()=>(0,a.Lk)("h2",null,"Checkout",-1))),$=E((()=>(0,a.Lk)("strong",null,"First Name:",-1))),P=E((()=>(0,a.Lk)("strong",null,"Last Name:",-1))),V=E((()=>(0,a.Lk)("strong",null,"Phone:",-1))),x={key:0,style:{color:"red"}},R=E((()=>(0,a.Lk)("h2",null,"Order Information",-1))),W=["disabled"],J={key:1},Q={class:"cart"},B=E((()=>(0,a.Lk)("h2",null,"Shopping Cart",-1))),K={class:"cart-list"},D={class:"cart-item"},q={class:"product-details"},z=E((()=>(0,a.Lk)("strong",null,"Location:",-1))),G=E((()=>(0,a.Lk)("strong",null,"Price:",-1))),H=E((()=>(0,a.Lk)("strong",null,"Slots Available:",-1))),M=["onClick"];function Y(e,t,r,n,l,i){return(0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("div",U,[I,(0,a.Lk)("p",null,[$,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.order.firstName=e)},null,512),[[o.Jo,l.order.firstName,void 0,{trim:!0}]])]),(0,a.Lk)("p",null,[P,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.order.lastName=e)},null,512),[[o.Jo,l.order.lastName,void 0,{trim:!0}]])]),(0,a.Lk)("p",null,[V,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.order.phone=e),type:"tel"},null,512),[[o.Jo,l.order.phone,void 0,{number:!0}]])]),i.isFormValid?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("p",x,"Please fill in all fields.")),R,(0,a.Lk)("p",null,"First Name: "+(0,s.v_)(l.order.firstName),1),(0,a.Lk)("p",null,"Last Name: "+(0,s.v_)(l.order.lastName),1),(0,a.Lk)("p",null,"Phone Number: "+(0,s.v_)(l.order.phone),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.submitOrderForm&&i.submitOrderForm(...e)),disabled:!i.isFormValid},"Place Order",8,W),l.orderSubmitted?((0,a.uX)(),(0,a.CE)("p",J,"Order Submitted!")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Q,[B,(0,a.Lk)("ul",K,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.cart,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},[(0,a.Lk)("div",D,[(0,a.Lk)("i",{class:(0,s.C4)(e.icon)},null,2),(0,a.Lk)("div",q,[(0,a.Lk)("h3",null,(0,s.v_)(e.title),1),(0,a.Lk)("p",null,[z,(0,a.eW)(" "+(0,s.v_)(e.Location),1)]),(0,a.Lk)("p",null,[G,(0,a.eW)(" "+(0,s.v_)(e.price),1)]),(0,a.Lk)("p",null,[H,(0,a.eW)(" "+(0,s.v_)(e.spaces),1)])]),(0,a.Lk)("button",{onClick:t=>i.removeFromCart(e._id),class:"remove-button"},"Remove",8,M)])])))),128))])])])}var Z={name:"CheckoutForm",props:["cart","submit-order"],data(){return{order:{firstName:"",lastName:"",phone:""},orderSubmitted:!1}},computed:{isFormValid(){return this.order.firstName&&this.order.lastName&&this.order.phone}},methods:{removeFromCart(e){this.$emit("remove-from-cart",e)},submitOrderForm(){this.isFormValid&&this.$emit("submit-order",this.order)}}};const ee=(0,N.A)(Z,[["render",Y],["__scopeId","data-v-dd869c3a"]]);var te=ee,re={name:"App",components:{LessonComponent:j,CheckoutForm:te},created(){"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js")},data(){return{lessons:[],cart:[],showCheckout:!1,baseURL:"https://cw2-backend-lyart.vercel.app/"}},methods:{async submitOrder(e){try{this.cart.forEach((e=>{fetch(`${this.baseURL}collection/lessons/${e._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:e.spaces-this.cart.filter((t=>t._id===e._id)).length})})}));const t=await fetch(`${this.baseURL}collection/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,cart:this.cart})});t.ok&&(this.cart.length=0,this.showCheckout=!1,alert("Order Submitted"))}catch(t){console.error("Error submitting order:",t)}},canAddToCart(e){return e.spaces>this.cartCount(e._id)},cartCount(e){return this.cart.filter((t=>t._id===e)).length},addToCart(e){this.canAddToCart(e)&&this.cart.push(e)},removeFromCart(e){const t=this.cart.findIndex((t=>t._id===e));-1!==t&&this.cart.splice(t,1)}}};const oe=(0,N.A)(re,[["render",c],["__scopeId","data-v-0e30d93f"]]);var ae=oe;(0,o.Ef)(ae).mount("#app")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,o,a,s){if(!o){var n=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],s=e[d][2];for(var l=!0,i=0;i<o.length;i++)(!1&s||n>=s)&&Object.keys(r.O).every((function(e){return r.O[e](o[i])}))?o.splice(i--,1):(l=!1,s<n&&(n=s));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,a,s]}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,s,n=o[0],l=o[1],i=o[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(i)var d=i(r)}for(t&&t(o);c<n.length;c++)s=n[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(d)},o=self["webpackChunkpetstore"]=self["webpackChunkpetstore"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],(function(){return r(9396)}));o=r.O(o)})();
//# sourceMappingURL=app.f534a066.js.map